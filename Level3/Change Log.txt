Version 1.31
============

Date - estimated July 1988. Dates in change comments since v1.24 include 
4/29 April 1988, 22 May 1988, 1 Jun 1988 and 1/7/20 July 1988.

Binary Files (* denotes the official ACORN released version)
============
  FS3-131   - Assembler options DONGLE absent, Pseudo directory symbols No
* FS3-131d  - Assembler options DONGLE present, Pseudo directory symbols No 
  FS3-131p  - Assembler options DONGLE absent, Pseudo directory symbols Yes
  FS3-131dp - Assembler options DONGLE present, Pseudo directory symbols Yes
* FSR-131   - Filestore FS ROM. Pseudo directory symbols No, 
                                Cachesw not disabled
* MOS-131   - MOS ROM for Filestore. NFS 3.3.3C 

Comments
========
This is the original and unchanged source code. Since just before v1.20 the 
FileStore had become an ACORN product which used the same code base as the Level3 file server. The original code was 3 directories
 - L3 containing the Level3 file server code
 - Filestore with the File Store file server code for the new E01 Filestore
 - Fileserver which appears to be an unfinished attempt to merge the Level3
   file server and FileStore file server code base 

The merged code was based on 2 switches, Level3 (representing Level3 
file server) and CMOS (representing the Filestore which used the 65C02 processor
and its enhanced instruction set). The work to merge the code bases has now been
completed. As no Level3 binaries after v1.31 are known, the code changes in the
FileStore file server code can now be applied to Level3 file server.

The FileStore software also has a big buffer cache option introduced for
replies. This may also have been in earlier versions.

The original file FSMAKE that puts together the assembled parts has been
altered to insert 512 bytes at the start of the ROM so the image is ready
for use directly. This maps to 512 bytes of zero page workspace as the ROM
code executes from address 0x200.

Changes (from v1.24) (Level3 source files)
==========================================

HEADER FILE 1
         Uade01 Line 0064 VERLA, version changed from 2 to 3
20/07/88 Uade01 Line 0065 VERLB, version changed from 4 to 1
         Uade01 Line 0194 SYNERR changed from &FE to &DC

UTILITIES
         Uade03 Line 0012 (C) date changed from 1987 to 1988

24/02/88 Uade04 Line 0243 changes made to date evaluation code
         Uade04 Line 0244 ensuring day is not >31
         Uade04 Line 0256 
         Uade04 Line 0274
         Uade04 Line 0275

FILE SERVER INITIALISATION

24/03/88 Uade04 Line 0685 include the century in the date calculation
[typo 24/02/88?]  to 0687
24/02/88 Uade04 Line 0692
         Uade04 Line 0699
                  to 0701
         Uade04 Line 0703
         Uade04 Line 0705
         Uade04 Line 0708
24/02/88 Uade04 Line 0759
24/02/88          to 0761
         Uade04 Line 0763
         Uade04 Line 0805
         Uade04 Line 0811
                  to 0814
24/02/88 Uade04 Line 0838
                  to 0840
         Uade04 Line 0845
         Uade04 Line 0882
         Uade04 Line 0889 Leap year check
                  to 0891
         Uade04 Line 0926 Use carry flag to display leading 0 for hours
                     0931 Use carry flag to display leading 0 for minutes
24/02/88 Uade04 Line 1012
                  to 1015

24/02/88 Uade04 Line 0287 changes made to printing decimal numbers
         Uade04 Line 0294 ensuring flag to print leading zeros is not lost
         Uade04 Line 0297
         Uade04 Line 0304

USRMAN
         Uade06 Line 0979 close down routine "LOGOFF"
01/06/88          to 0983
         Uade06 Line 0987
         Uade06 Line 0989
         Uade06 Line 0990
         Uade06 Line 0992
         Uade06 Line 0993
01/06/88 Uade06 Line 0999

         Uade06 Line 1073 routine GETUFD. change made to the how the root
         Uade06 Line 1076 dir is created
07/07/88          to 1077 
         Uade06 Line 1091 routine RTROOT
         Uade06 Line 1093
         Uade06 Line 1114 store the users disc number in a variable instead 
         Uade06 Line 1116 of on the stack
         Uade06 Line 1120 and use UMHLIB instead of USTEMP
                  to 1122 
         Uade06 Line 1138
         Uade06 Line 1140
         Uade06 Line 1143 comment change to retrieve root again without
                  to 1144 checking if it already has been
         Uade06 Line 1146 Clean up before doing the retrieve
         Uade06 Line 1157 retrieve the previous user disc number
         Uade06 Line 1159 
RNDMAN
29/04/88 Rman02 Line 0160 Change file size. code moved to a subroutine
         Rman02 Line 0161 RDEXSZ in Rman04 to extend the file
29/04/88 Rman02 Line 0163
         Rman02 Line 0164
                     
01/06/88 Rman02 Line 0383 bugfix: High water mark not increased when setting 
                                  the sequential file pointer, if it exceeded 
                                  the high existing high water mark 

23/03/88 Rman03 Line 0250 bugfix for the access mode for Putbytes/Getbytes
                  to 0254 operations

29/04/88 Rman04 Line 0183 Set new file size and call the new subroutine
         Rman04 Line 0184 RDEXSZ to extend the file
29/04/88 Rman04 Line 0215 Subroutine RDEXSZ
         Rman04 Line 0253

DIRMAN
23/03/88 Uade0C Line 0021 New function 13 added. Check if object will preserve
         Uade0C Line 0023 Increase the number of functions
         Uade0C Line 0046 add routine to table
04/04/88 Uade0C Line 0127 call as a subroutine
         Uade0C Line 0128 and use the DIRMAN exit function                     
04/04/88 Uade0C Line 0154 Routine DRRET2 set up the name, root character and 9
                  to 0158 spaces
         Uade0C Line 0171     add check for directory type and the locked bit
         Uade0C Line 0172
         Uade0C Line 0174
         Uade0C Line 0175
         Uade0C Line 0177
         Uade0C Line 0178
         Uade0C Line 0181
04/04/88 Uade0C Line 0256 Change to RTS as a subroutine exit

04/04/88 Uade0C Line 0890 DRINFO most of the routine changed
                  to 0930
                     
         Uade0D Line 0153 check for : character removed as it was there twice
01/06/88 Uade0D Line 0580 compatibility for "^" ?
         Uade0D Line 0581
         Uade0D Line 0584 

         Uade0D Line 0858 Code for RETPAR changed around in order of 
         Uade0D Line 0861 execution.
         Uade0D Line 0865
                  to 0912

         Uade0E Line 0380 OUTZRO routine removed
24/02/88 Uade0E Line 0472 ensure only the day of the month is output
         Uade0E Line 0473
         Uade0E Line 0479
         Uade0E Line 0480 set the value for the year
                  to 0483 
         Uade0E Line 0494
24/02/88 Uade0E Line 0501 ensure year 20xx compatable
                  to 0504
         Uade0E Line 0524 code optimised for character conversion

01/06/88 Uade0E Line 0723 bugfix when outputting the access byte 
         Uade0E Line 0747
                  to 0763

AUTMAN
22/03/88 Uade10 Line 0092 code moved to subroutine ATOPWF
         Uade10 Line 0094
                  to 0096 comments added
22/05/88 Uade10 Line 0189 new subroutine ATOPWF
                  to 0210
22/03/88 Uade10 Line 0337 changed to use new open password file routine
22/03/88 Uade10 Line 0369 changed to use new open password file routine

         Uade10 Line 0814 check for alternative return code &FF instead of end 
                          of file removed
01/06/88 Uade10 Line 0943 round up if part sector and skip check for page
                  to 0947 boundary at which was at 0978 (removed)
         Uade10 Line 0979 remove unnecessary branch label
01/06/88 Uade10 Line 0982 check if password file is too big
01/06/88 Uade10 Line 0986 
                  to 0988 flush the now unwanted segment

         Uade10 Line 1027 code optimised to check for end of PW file
                  to 1036

01/06/88 Uade10 Line 1068 check if the password file will be too big before
                  to 1074 trying to enlarge it

MAPMAN
24/02/88 Uade10 Line 0106 check added for write protect
                  to 0108

         Uade10 Line 0705 code optimisation. keep a copy of the map block 
                     0709 pointer on the stack. 
01/07/88 Uade10 Line 0721 and use it instead of making the calculation again
                  to 0724

         Uade10 Line 0864 Code optimised to save having to get the drive 
         Uade10 Line 0869 number twice
         Uade10 Line 0879
         Uade10 Line 0873 Comments reinstated
         Uade10 Line 0875
         Uade10 Line 0877

05/03/88 Uade10 Line 0882 some checks and then.. 
                  to 0891 code moved to a new subroutine MPRESZ
05/03/88 Uade10 Line 0918 new subroutine MPRESZ from previous code
                  to 0944 

MAPMAN UTILITIES
06/07/88 Uade11 Line 0072 exit if Sector zero not retrieved
05/03/88 Uade11 Line 0092 code optimised to use the new routine MPRESZ
01/07/88 Uade11 Line 0498 code replaced by subroutine SETMB
01/07/88 Uade11 Line 0700 ??
         Uade11 Line 0703
         Uade11 Line 0711
         Uade11 Line 0719 branch labels changed
                  to 0756 

MAPMAN UTILITIES II
01/07/88 Uade12 Line 0285 code optimised
                  to 0286
         Uade12 Line 0605 code optimised
                  to 0617 
                  
DSCMAN
24/02/88 Uade14 Line 0826 routine Testdv, mainly to check for write protect
                  to 0843

COMMAND PROCESSOR
23/03/88 Uade16 Line 0032 implement check for DIRMAN CHECKPRES (function 13)
         Uade16 Line 0287 DRPRES routine moved and now shared with CHECKPRES
         Uade16 Line 0288
         Uade16 Line 0320 Routine for CHECKPRES and DRPRES
                  to 0367
                  
         Uade16 Line 0039 ??
                  to 0042

         Uade16 Line 0061 code optimised
                     0062

         Uade19 Line 0019 code optimised
         Uade19 Line 0043 
         Uade19 Line 0053
                  to 0070   
         Uade19 Line 0085 label removed. no longer required

23/03/88 Uade19 Line 0473 Check mode of access for file
         Uade19 Line 0495 Ensure 0 returned if ok

23/03/88 Uade19 Line 0580 Code optimised. Moved to new subroutine RMSUBR shared
         Uade19 Line 0581 by Putbytes and Getbytes 
         Uade19 Line 0587 label removed. no longer required
         Uade19 Line 0692 code moved to new subroutine RMSUBR
                  to 0719 
         Uade20 Line 0088 Bugfix. Y not initialised to 0 when checking for a tx
                          on tx

22/03/88 Uade20 Line 0544 code optimised. 
         Uade20 Line 0547 because of code reuse ensure X is preserved
         Uade20 Line 0551
                  to 0553
         Uade20 Line 0548 
         Uade20 Line 0571
         Uade20 Line 0572

         Uade20 Line 1022 New errors. SYNERR "Syntax"
         Uade20 Line 1024 NUMERR "Bad Number"
         Uade20 Line 1067 repeated for Italian language
         Uade20 Line 1069


-------------------------------------------------------------------------------

Version 1.25
============

Date - 20 Jan 2018

Patch for Acorn Level3 File Server to allow the use of dates after 1996. This
also allows the use of dates after 1999. In keeping with the 'Short Acorn Era',
any two-digit year 00 to 80 is defined as being 2000 to 2080. Any two-digit
year from 81 to 99 is defined as being 1981 to 1999.

Binary Files (* denotes the official ACORN released version)
============
  FS3-125  - Assembler options: DONGLE=1 (absent)
  FS3-125d - Assembler options: DONGLE=0 (present)


Comments
========
This is NOT the Acorn released v1.25. It is the Acorn released v1.24 with a 
date fix patch applied.

This code has been created using the v1.24 source code and the BASIC patch
source code by J.G.Harston. 

The code has been updated to include the fix as an assembly option in file
Uade01. 
Y2KPAT * 0 ; no(=0) Apply the JGH Patch (=1)

Changes (from v1.24)
====================
Option for assembly with date fix (file Uade01)
The version number is now 1.25 (file Uade01)
Allows startup entry of years from 1981 to 2080 (file Uade04)
Status line date displays years after 1996 correctly (file Uade04)
Years after 1996 in *INFO reports are displayed correctly (file Uade0E)


-------------------------------------------------------------------------------

Version 1.24
============

Date - estimated between Jun 87 and Feb 1988.

Comments for the language switch in Italian 18/2/87 predate v1.06 comments
but this change is not in that code - this is likely a typo for 18/2/88 when
other comments were made. Other dates in comments in this version
include 1/2/12/15/26 June 1987, 1/9/24 July 1987, 8/18/24 Feb 1988 and
23 March 1988.

Binary Files (* denotes the official ACORN released version)
============
  FS3-124   - Assembler options DONGLE absent, Pseudo directory symbols No
  FS3-124d  - Assembler options DONGLE present, Pseudo directory symbols No 
  FS3-124p  - Assembler options DONGLE absent, Pseudo directory symbols Yes
* FS3-124dp - Assembler options DONGLE present, Pseudo directory symbols Yes


Comments
========
This code has been created using the v1.31 source code. Within that code there
are options for Lang English/Italian (added Feb 1987) and the Pseudo directory 
symbols (%, &, @). Pseudo directory symbols were definately available in v1.24, 
but as the comment for the switch option is dated 1988, it is possible that it 
was hard coded and later modified to be an option at assembly time. The switch 
has been left in.

Changes (from v1.06)
====================
Numerous changes were made. Not all are detailed here as there are so many.
Leap year calculation.
It is thought that sometime before this version compatibility has been added
for AUN.
Protection now set at &3F for a service system instead of &FF
Pseudo directory symbols (%, &, @)


-------------------------------------------------------------------------------

Version 1.07
============

Date - estimated about May 1987. Only one change comment dated 20/5/87

Binary Files (* denotes the official ACORN released version)
============
  FS3-107   - Assembler options: DONGLE=1 (dongle absent)
  FS3-107y  - Assembler options: DONGLE=1 (dongle absent)
                                 Y2KPAT=1 (date fix)
                                 
Comments
========
The version widely distributed having the version number v1.07 is the same as 
v1.06 except it is assembled for the RTC dongle being absent. The differences 
are the version number and the serial number in the binary.

The code has been updated to include the date fix as an assembly option in 
file Uade01. 
Y2KPAT * 0 ; no(=0) Apply the JGH Patch (=1)

Changes (from v1.06)
====================
HEADER FILE 1
         Uade01 Line 0057 Option for assembly with date fix (file Uade01)
         Uade01 Line 0060 VERLB, version changed from 6 to 7

Allows startup entry of years from 1981 to 2080 (file Uade04)
Status line date displays years after 1996 correctly (file Uade04)
Years after 1996 in *INFO reports are displayed correctly (file Uade04)
Dates are displayed as dd/mm/yy instead of dd:mm:yy (file Uade0E)


-------------------------------------------------------------------------------

Version 1.06
============

Date - estimated about May 1987. Only one change comment dated 20/5/87

Binary Files (* denotes the official ACORN released version)
============
  FS3-106  - Assembler options: DONGLE=1 (absent)
             This has also been seen as a binary with version 1.07
* FS3-106d - Assembler options: DONGLE=0 (present)

Comments
========
Some of these changes may have been made in v1.05, but there is no binary
available to investigate. This is the original and unchanged source code.

Changes (from v1.04)
====================

HEADER FILE 1
         Uade01 Line 0060 VERLB, version changed from 4 to 6
         
MAPMAN
         Uade10 Line 0300-0301 removed JSR FNDMAP, BNE MPCHJX
                          when changing the size of a chain on disc
         Uade10 Line 0322 BCS branch removed

                          
MAPMAN UTILS 2
20/05/87 Uade12 Line 1086 bugfix: Map block not being marked as written
                          after blocks have been deleted
         Uade12 Line 1054 moved CBNT code block from line 1129 to 1056
                          inline with other code
         Uade13 Line 0481 bugfix: in routine MPGTSZ - find size of object
         Uade13 Line 0567 bugfix: PLA PLA removed from routine
       
       
-------------------------------------------------------------------------------

Version 1.04
============

Date - estimated sometime after June 1986. no dated comments after June 1986

Binary Files (* denotes the official ACORN released version)
============
  FS3-104  - Assembler options: DONGLE=1 (absent)
* FS3-104d - Assembler options: DONGLE=0 (present)

Comments
========

Changes (from v1.03)
====================

HEADER FILE 1
         Uade01 Line 0060 VERLB, version changed from 3 to 4

MAPMAN
         Uade10 Line 0300 JSR FNDMAP added to check before changing size of a chain
                          on disc
         Uade10 Line 0322 BCS branch added

MAP BLOCK AND BIT MAP MANAGEMENT
         MBBMCM Line 0152 bugfix: Update the cache block descriptor after 
                          getting a block to store

DSCMAN
         Uade14 Line 0754 changed disc error reporting text 
                     0754 "       : Disc Error. " to "Disc Error N0. "
         Uade14 Line 0759 " At " to " At Disc Address "    


-------------------------------------------------------------------------------

Version 1.03
============

Date - estimated about June 1986. Last comment was 5/6/86

Binary Files (* denotes the official ACORN released version)
============
  FS3-103  - Assembler options: DONGLE=1 (absent)
* FS3-103d - Assembler options: DONGLE=0 (present)

Comments
========
A reference is made in file STRMAN to code from v1.02.

Changes (from v1.01)
====================

HEADER FILE 1
         Uade01 Line 0060 VERLB, version changed from 1 to 3

STRMAN
         Uade0B Line 0246 bugfix: introduced at v1.02. When removing objects
                          from the disc, age the entries on ensure and remove
                          them on destroy from cache

DSCMAN
05/06/86 Uade14 Line 0743-0789 Report disk errors to screen
 

-------------------------------------------------------------------------------

Version 1.01
============

Date - estimated about Jan 1986

Binary Files (* denotes the official ACORN released version)
============
  FS3-101   - Assembler options: DONGLE=1 (absent)
* FS3-101d  - Assembler options: DONGLE=0 (present)

Comments
========
The changes in the source code include all changes since the pre-release 
version and may have occurred in any of the versions inbetween e.g. other
pre-release versions and 1.00

Changes (from v0.90 Pre-Release IV.05)
======================================

HEADER FILE 1
         Uade01 Line 0059 VERLA and VERLB, version changed from 90 to 01

HEADER FILE 2
         Uade02 Line 0016 User ID size expanded from MAXUNM to MAXUNM+1
15/12/85 Uade02 Line 0209 Number of bit map cache blocks changed from 5 to 15
         Uade02 Line 0286 Check for free storage with dongle absent changed from
                          &8A00 to &8B00 and present &8B00 to &8C00 

UTILIITES
         Uade03 Line 0021 removed code start vector from binary
         Uade03 Line 0029 Changes to major version number and version handling
21/10/85 Uade03 Line 0031 File server station number added to screen display
         
File Server Initialisation
17/01/86 Uade04 Line 0262 CHKDTE Code that did nothing removed
         
USRMAN
14/01/86 Uade06 Line 0630-0650 bugfix: reporting privileged users only to a 
                          PRIV request
         Uade06 Line 0679 JSR INCGPT re-instated to update the pointer with the 
                          termination

RNDMAN
         Rman01 Line 0139 2 lines of redundant code removed
         Rman02 Line 0472 unnecessary code removed
15/12/85 Rman05 Line 0045 Useless code updated
         Rman05 Line 0195 JSR STRMAN changed to JMP STRMAN and unnecessary 
                          RTS instruction removed

STRMAN
03/12/85 Uade0B Line 0246 bugfix: age and ensure objects when removing them from 
                          disc
         
DIRMAN UTILITIES
         Uade0D Line 0818 bugfix: Owner Locked bit not preserved on file access
     
DIRMAN UTILITIES 2
         Uade0E Line 1071 JSR STRMAN changed to JMP STRMAN and unnecessary 
                          RTS instruction removed

AUTMAN
	 Uade0F Line 0071 bugfix: clear cache before password file operations
	 Uade0F Line 0281 bugfix: clear cache before password file operations
	 Uade0F Line 0347 bugfix: clear cache before password file operations
	 Uade0F Line 0382 bugfix: clear cache before password file operations
	 Uade0F Line 0458 bugfix: clear cache before password file operations
	 Uade0F Line 0463 No need to ensure PW file when setting flag
	 Uade0F Line 0546 ensure before flushing
	 Uade0F Line 0556 bugfix: clear cache before password file operations
	 Uade0F Line 0605 ensure before flushing
	 Uade0F Line 1035 routine APWIPE to clear cache

24/10/85 Uade0F Line 0749 bugfix: would only check 1 terminator when checking
                          passwords
24/10/85 Uade0F Line 0776-0780 bugfix: checking for "." character

MAPMAN UTILS 2
27/01/86 Uade12 Line 0477 bugfix: Cylinder Pointer low byte not being 
                          incremented

MAP BLOCK AND BIT MAP MANAGEMENT
17/01/86 MBBMCM Line 0127-0154 Error not preserved when block retrieve fails
         MBBMCM Line 0259 bugfix: 
                     0296-0300

DSCMAN
         Uade14 Line 0096 ensure debug code is within the debug directive
         Uade14 Line 0147 ensure debug code is within the debug directive
         Uade14 Line 0577 return to start drive removed as unnecessary

COMMAND PROCESSOR
         Uade15 Line 0200 bugfix: wasn't allowing final function code
         Uade15 Line 0281 Added CPWHO function to return client userid
14/01/86 Uade17 Line 1057 routine USERS Store user priviledge in the stack
         Uade17 Line 1164 Change end of version number code from 13 to 6
         Uade18 Line 0033-0036 bugfix: in RENAME routine
         Uade18 Line 0151-0158
         Uade18 Line 0389 bugfix: in FIND routine
         Uade18 Line 0391-0397
         Uade18 Line 0423-0431
         Uade18 Line 0478-0485
         Uade19 Line 0112 change JMP COMRTS to JMP CPRDAX for PUTBYT routine
         Uade19 Line 0187 change JMP ERROR to JMP CPRDAX
         Uade19 Line 0452 bugfix: PUTBYTES routine use a 32 bit number to hold
         Uade19 Line 0460 the amount transferred
26/02/85 Uade19 Line 0680 bugfix: GETBYTES routine use a 32 bit number to hold
         Uade19 Line 0681 the amount transferred
19/03/85 Uade19 Line 0722-0749 CPWHO routine allowing an application to
                          determine the userid under which it is logged-on


-------------------------------------------------------------------------------

Version 0.92
============

Date - Dec 1998

Binary Files (* denotes the official ACORN released version)
============
  FS3-092  - Dongle absent

Comments
========
J.G.Harston released a fix in Dec 1998 for v0.90 to allow the use of dates 
after 1996. This patched the above mentioned v0.90 Pre-Release IV.05 or
"BARSON COMPUTERS" binary.

The code has been updated to include the fix as an assembly option in file
Uade01. 
Y2KPAT * 0 ; no(=0) Apply the JGH Patch (=1)

Changes
=======
Option for assembly with date fix (file Uade01)
The version number is now 0.92 (file Uade01)
Allows startup entry of years from 1981 to 2080 (file Uade04)
Status line date displays years after 1996 correctly (file Uade04)
Years after 1996 in *INFO reports are displayed correctly (file Uade04)
Dates are displayed as dd/mm/yy instead of dd:mm:yy (file Uade0E)


-------------------------------------------------------------------------------

Version 0.90 Pre-Release IV.05
==============================

Date - estimated. May-Oct 1985 (possibly 4 May from the pre-release version). 
       Two comments are dated after that date but with code included in the 
       binary. The comments could have been added at a later date to already
       existing code or versions were kept the same but the code was different.
       That would date the code to Oct 1985. There are changes labelled 
       15/12/85 that are not in this binary. The assembler directive file FSASM
       has the comment updated by Glenn 8/5/85.
       
Binary Files (* denotes the official ACORN released version)
============
* FS3-090  - Dongle absent
  FS3-090b - Dongle absent. BARSON COMPUTERS variant

Comments
========
There are two Trace debug pieces of code in the final binary although the 
DEBUG directive is set to 0 (file Uade14) and the binary performs a simple RTS
when it is called.

There is also a version of the same code with the banner displaying BARSON
COMPUTERS. Barson were one of Acorn's distributors in Australia and it looks
like the branding was probably done by hex editing the binary directly rather 
than altering the code.

Changes
=======
No previous version to compare to.
