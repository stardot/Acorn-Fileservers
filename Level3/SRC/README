Level 3 File Server v1.01
=========================

This disc contains a recreation of the source code for the Acorn Level 3 
File Server. It has been achieved by using the original binary and the 
source code from v1.06.

Assembling the File Server Source Code
======================================

The source code will assemble on either a BBC with an Acorn Turbo (256K) 
6502 Co-Processor and ADFS or on Arthur/RISC OS using the 6502 Turbo 
Co-Processor emulator which is included here.
To assemble on a BBC, use SHIFT-BREAK or *EXEC !BOOT. On RISC OS, double 
clicking the file GO will start the process. The assembled file "FS" will be
placed in the root directory. The assembly process is significantly faster 
when a hard drive is used instead of a floppy.

Files
=====

\ $
  !BOOT     - BBC Routine to set library and call L3ASM
  GO        - RISC OS Routine to set library, load emulator and call L3ASM
  README    - This file
  L3ASM     - Loads TurboMasm and starts the assembly process
  LOADER    - BASIC program to put together the assembled parts and create the 
              Level3 binary "FS"

\ LIBRARY
  65ARTHURT - The Turbo Co-processor emulator for RISC OS
  CB        - BASIC for the Turbo Co-processor
  TURMASM   - Turbo version of MASM assembler
  
\ L3  
  The source code files  

\ L3\X
  Location for the assembled parts. Do not delete or the assembler will fail.


Version 1.01
============

Date - estimated about Jan 1986

Comments
========
The changes in the source code include all changes since the pre-release 
version and may have occurred in any of the versions inbetween e.g. other
pre-release versions and 1.00.

Changes (from v0.90 Pre-Release IV.05)
======================================

HEADER FILE 1
         Uade01 Line 0059 VERLA and VERLB, version changed from 90 to 01

HEADER FILE 2
         Uade02 Line 0016 User ID size expanded to from MAXUNM to MAXUNM+1
15/12/85 Uade02 Line 0209 Number of bit map cache blocks changed from 5 to 15
         Uade02 Line 0286 Check for free storage with dongle absent changed from
                          &8A00 to &8B00 and present &8B00 to &8C00 

UTILIITES
         Uade03 Line 0021 removed code start vector from binary
         Uade03 Line 0029 Changes to major version number and version handling
21/10/85 Uade03 Line 0031 File server station number added to screen display
         
File Server Initialisation
17/01/86 Uade04 Line 0262 CHKDTE Code that did nothing removed
         
USRMAN
14/01/86 Uade06 Line 0630-0650 bugfix: reporting privileged users only to a 
                          PRIV request
         Uade06 Line 0679 JSR INCGPT re-instated to update the pointer with the 
                          termination

RNDMAN
         Rman01 Line 0139 2 lines of redundant code removed
         Rman02 Line 0472 unnecessary code removed
15/12/85 Rman05 Line 0045 Useless code updated
         Rman05 Line 0195 JSR STRMAN changed to JMP STRMAN and unnecessary 
                          RTS instruction removed

STRMAN
03/12/85 Uade0B Line 0246 bugfix: age and ensure objects when removing them from 
                          disc
         
DIRMAN UTILITIES
         Uade0D Line 0818 bugfix: Owner Locked bit not preserved on file access
     
DIRMAN UTILITIES 2
         Uade0E Line 1071 JSR STRMAN changed to JMP STRMAN and unnecessary 
                          RTS instruction removed

AUTMAN
	 Uade0F Line 0071 bugfix: clear cache before password file operations
	 Uade0F Line 0281 bugfix: clear cache before password file operations
	 Uade0F Line 0347 bugfix: clear cache before password file operations
	 Uade0F Line 0382 bugfix: clear cache before password file operations
	 Uade0F Line 0458 bugfix: clear cache before password file operations
	 Uade0F Line 0463 No need to ensure PW file when setting flag
	 Uade0F Line 0546 ensure before flushing
	 Uade0F Line 0556 bugfix: clear cache before password file operations
	 Uade0F Line 0605 ensure before flushing
	 Uade0F Line 1035 routine APWIPE to clear cache

24/10/85 Uade0F Line 0749 bugfix: would only check 1 terminator when checking
                          passwords
24/10/85 Uade0F Line 0776-0780 bugfix: checking for "." character

MAPMAN UTILS 2
27/01/86 Uade12 Line 0477 bugfix: Cylinder Pointer low byte not being 
                          incremented

MAP BLOCK AND BIT MAP MANAGEMENT
17/01/86 MBBMCM Line 0127-0154 Error not preserved when block retrieve fails
         MBBMCM Line 0259 bugfix: 
                     0296-0300

DSCMAN
         Uade14 Line 0096 ensure debug code is within the debug directive
         Uade14 Line 0147 ensure debug code is within the debug directive
         Uade14 Line 0577 return to start drive removed as unnecessary

COMMAND PROCESSOR
         Uade15 Line 0200 bugfix: wasn't allowing final function code
         Uade15 Line 0281 Added CPWHO function to return client userid
14/01/86 Uade17 Line 1057 routine USERS Store user priviledge in the stack
         Uade17 Line 1164 Change end of version number code from 13 to 6
         Uade18 Line 0033-0036 bugfix: in RENAME routine
         Uade18 Line 0151-0158
         Uade18 Line 0389 bugfix: in FIND routine
         Uade18 Line 0391-0397
         Uade18 Line 0423-0431
         Uade18 Line 0478-0485
         Uade19 Line 0112 change JMP COMRTS to JMP CPRDAX for PUTBYT routine
         Uade19 Line 0187 change JMP ERROR to JMP CPRDAX
         Uade19 Line 0452 bugfix: PUTBYES routine use a 32 bit number to hold
         Uade19 Line 0460 the amount transferred
26/02/85 Uade19 Line 0680 bugfix: GETBYES routine use a 32 bit number to hold
         Uade19 Line 0681 the amount transferred
19/03/85 Uade19 Line 0722-0749 CPWHO routine allowing an application to
                          determine the userid under which it is logged-on
