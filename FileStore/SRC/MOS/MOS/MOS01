 OPT 2 ; FILE > <FileStoreMOSSource>.MOS01
 TTL File server file MOS01


;*********************************
;*    H E A D E R  F I L E  1    *
;*********************************

 ORG &E800
 CPU 1
 
VERLA * "3" ; Major
VERLB * "6" ; Minor
VERLC * "6"

;HARDWARE DEPENDANT CONSTANTS
MCTYPE * &0B ; Filestore

; *******************************************************************
; NETWORK 


;CONTROL BLOCK FORMAT - LOCATED ANYWHERE IN MEMORY
CBCNTL * &00 ;N.B. SEE CONTROL BYTE VALUES VALID CONTROL BLOCK
CBPORT * &01
CBSRLO * &02 ;N.B. SEE STATION ID VALUES CONTROL BLOCK SOURCE LO
CBSRHI * &03
CBSALO * &04 ;CONTROL BLOCK DATA START ADDRESS LO
CBSAHI * &05
CBSAH1 * &06
CBSAH2 * &07
CBEALO * &08 ;CONTROL BLOCK DATA END ADDRESS LO
CBEAHI * &09
CBEAH1 * &0A
CBEAH2 * &0B
XTRA1L * &0C
XTRA1H * &0D
XTRA2L * &0E
XTRA2H * &0F

; SCOUT BUFFER FORMAT
SRLO   * &00
SRHI   * &01
CNTL   * &02 ; ZERO FOR IMMEDIATE OPERATIONS
PORTn  * &03
ADTO1  * &04
ADTO2  * &05
ADTO3  * &06
ADTO4  * &07
ADFR1  * &08
ADFR2  * &09
ADFR3  * &0A
ADFR4  * &0B
SBSIZE * &0C ; SIZE OF SCOUT BUFFER

;CONTROL BYTE VALUE IMMEDIATE CONSTANTS.
IPEEK  * &81 ;REMOTE PEEK N.B. MUST BE LOWEST NUMBER
IPOKE  * &82 ;REMOTE POKE
IRTN   * &83 ;REMOTE ROUTINE CALL
IPROCE * &84 ;REMOTE EVENT PROCEDURE CALL
IPROCH * &85 ;REMOTE HIGH LEVEL PROCEDURE CALL
ISTOP  * &86 ;REMOTE STOP
ISTRT  * &87 ;REMOTE RESTART
IMACH  * &88 ;MACHINE TYPE PEEK.

;PORT BYTE VALUE CONSTANTS.
ANYPRT * &00 ;ANY PORT ACCEPTED

;STATION ID RESERVED CONSTANTS
BDCAST * &FF ;BROADCAST ADDRESS
PRIVID * &F0 ;N.B STATIONS 240-254 NOT SUBJECT TO REMOTE IMMED OP CONTROL MASK
NETnum * &00 ;NETWORK ID CONSTANT

;STATION STATE CONSTANTS EXIST UNTIL CHANGED
STOP   * &04 ;FLAGS A STOPPED STATE

;NET STATE FLAG BITS RESET EVERY MESSAGE
SHORT  * &01 ;2 WAY HANDSHAKE
BCAST  * &40 ;SIGNALS A BROADCAST MESSAGE HAS BEEN RECEIVED
DACK   * &80 ;FLAGS A DATA ACK PACKET

;STATIC PAGE OFFSET CONSTANTS
PROBUF * &82 ;PROCEDURE PARAMETER BUFFER


MSIZE  * &04       ; MACHINE AREA FOUR BYTES TO PEEK

RXCLR  * &F        ; delete flag byte
RXRDY  * &7F
RXBLEN * &C        ; 12 bytes length of RX Block
RXBCNT * 18        ; number of RX blocks

FSDEF  * 254       ; default file station number
CR     * &D        ; Carriage Return
LF     * &A

LEDOFF * &7F       ; MODE LED Off
LEDON  * &80       ; MODE LED On

; Define non-volatile workspace in CMOS - 146818 clock chip
; Bytes 0-13 are date/time function, must not go beyond 63.

 ^ 14 ;Start after date/time space in CMOS
Stnids # 2 ;ECOnet station id offset (14+2)


BASEYR * 81

ZERO   * 0
ONE    * 1
TWO    * 2
THREE  * 3
FOUR   * 4
FIVE   * 5
SIX    * 6
SEVEN  * 7
EIGHT  * 8
NINE   * 9

TRUE   * 0
FALSE  * &FFFF
YES    * TRUE
NO     * FALSE


; Flags for fast code assembly

FAST1  * TRUE
FAST2  * FALSE
FAST3  * TRUE
FAST4  * TRUE
FAST5  * TRUE
FAST6  * TRUE
FAST7  * TRUE
FAST8  * FALSE
FAST9  * TRUE
FAST10 * FALSE
FAST11 * TRUE
FAST12 * TRUE

DEBUG * FALSE ; debug logging

 LNK MOS02
